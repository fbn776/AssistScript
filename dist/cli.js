#!/usr/bin/env node
'use strict';

var commander = require('commander');
var jn = require('fs');
var Wn = require('readline');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var jn__default = /*#__PURE__*/_interopDefault(jn);
var Wn__default = /*#__PURE__*/_interopDefault(Wn);

var u=(n,e)=>()=>(n&&(e=n(n=0)),e);var Gn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var De=(n,e,r)=>new Promise((a,i)=>{var l=s=>{try{m(r.next(s));}catch(c){i(c);}},d=s=>{try{m(r.throw(s));}catch(c){i(c);}},m=s=>s.done?a(s.value):Promise.resolve(s.value).then(l,d);m((r=r.apply(n,e)).next());});var C,N=u(()=>{C=class extends Error{constructor(e){super(e),this.name=this.constructor.name;}prettify(){return `${this.name}
Reason: ${this.message}`}};});var y,ae=u(()=>{N();y=class extends C{constructor(e){super(e),this.name="ASMakeError";}};});function Me(){let e="";for(let r=0;r<16;r++)e+=He[Math.floor(Math.random()*He.length)];return e}var He,Je=u(()=>{He="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";});var A,j=u(()=>{Je();A=class{constructor(e,r){this.value=e,this.type=r,this.tokenID=Me();}};});var q,Pe=u(()=>{j();q=class extends A{constructor(e){super(e,"TOKEN_NUMBER");}};});var V,$e=u(()=>{j();V=class extends A{constructor(e){super(e,"TOKEN_BOOLEAN");}};});var je,t,v=u(()=>{je=(m=>(m.number="number",m.string="string",m.boolean="boolean",m.command="command",m.array="array",m.any="any",m.void="void",m))(je||{}),t=je;});function Oe(n){for(let e of n)if(e!==n[0])return !1;return !0}function We(n){return isNaN(Number(n.value))?n.value==="true"||n.value==="false"?new V(n.value==="true"):n:new q(+n.value)}function Xe(n){switch(typeof n){case"string":return t.string;case"number":return t.number;case"boolean":return t.boolean;default:return t.any}}function we(n){return /^(?![0-9-])[\w-]+$/.test(n)}var W=u(()=>{Pe();$e();v();});var h,E=u(()=>{ae();W();h=class n{constructor(){this._store=new Map;}static getInstance(){return n._instance||(n._instance=new n),n._instance}hasCommand(e){return this._store.has(e)}getCommand(e){return this._store.get(e)||null}addCommand(e){for(let r of e.names){if(this._store.has(r))throw new y(`The command name '${r}' already exists.`);if(!we(r))throw new y(`The command name '${r}' is invalid. Command names should only include alphanumeric characters and underscores. And it should not start with a number.`);this._store.set(r,e);}}};});var z,Ye=u(()=>{z=class{constructor(){this.stack=[];}push(e){this.stack.push(e);}pop(){return this.stack.pop()}peek(){return this.stack[this.stack.length-1]}isEmpty(){return this.stack.length===0}size(){return this.stack.length}clear(){this.stack=[];}display(){console.log(this.stack);}toArray(){return this.stack}};});function Te(n,e,r=0){if(e>n.length)throw new Error(`Token position ${e} is greater than the length of the token array (${n.length})`);let a=0;for(let i=0;i<e;i++)a+=n.tokens[i].length+r;return a-r}function Ce(n,e,r=0){if(e>n.length)throw new Error(`Token position ${e} is greater than the length of the token array (${n.length})`);let a=0;for(let i=0;i<e;i++)a+=String(n.tokens[i].value).length+r;return a-r}var X,ve=u(()=>{X=class{constructor(e){this.index=0;this.tokens=e;}get length(){return this.tokens.length}get currIndex(){return this.index}nextToken(){return this.tokens[this.index++]||null}currToken(){return this.tokens[this.index]||null}hasMoreTokens(){return this.index<this.tokens.length}reset(){this.index=0;}};});var F,U,Y,ke=u(()=>{j();F=class extends A{constructor(e){super(e,"TOKEN_SEPARATOR");}},U=class extends F{constructor(){super("(");}},Y=class extends F{constructor(){super(")");}};});var x,oe=u(()=>{j();x=class extends A{constructor(e,r,a){super(e,"TOKEN_COMMAND"),this.params=r,this.isInternal=a||!1;}changeName(e){this.value=e;}get commandName(){return this.value}appendParam(e){this.params.push(e);}};});var Ze,D,Ie=u(()=>{Ze=(s=>(s.GenericError="GenericError",s.FoundNullToken="FoundNullToken",s.UnclosedQuote="UnclosedQuote",s.InvalidQuotes="InvalidQuote",s.InvalidBracket="InvalidBracket",s.EmptyCommand="EmptyCommand",s.PlaceholderError="PlaceholderError",s.UnclosedBracket="UnclosedBracket",s))(Ze||{}),D=Ze;});var _,Ne=u(()=>{Ie();N();_=class extends C{constructor({name:r="ASLangError",reason:a,source:i,position:l,fix:d,note:m,errorCode:s=D.GenericError,errorToken:c}){super(a);this.toString=this.prettify();this.reason=a,this.name=r||"ASLangError",this.source=i,this.position=l,this.fix=d,this.note=m,this.errorCode=s,this.errorToken=c;}prettify(){let i=(this.position||0)-1,l=i,d=this.name+`
`;d+=`Reason: ${this.reason}
`;let m=String(this.source).trim();if(console.log(m),m.length>60){let s=i-20,c=i+20;m=(s>0?"... ":"")+m.substring(s,c)+(c<m.length?" ...":""),l=s>0?20+(s>0?4:0):i;}return d+=`
> ${m}
`,d+="  "+(l>0?"\u250C":"\u2502")+"\u2500".repeat(l<0?0:l)+(l>0?"\u2518":"")+`
`,this.errorToken&&(d+=`  \u251C error token: ${String(this.errorToken).trim()}
`),this.position!=null&&(d+=`  \u251C position: ${this.position}
`),this.fix&&(d+=`  \u251C fix: ${this.fix}
`),this.note&&(d+=`  \u251C note: ${this.note}
`),d+=`  \u2514 error code: ${this.errorCode}`,d}};});var $,qe=u(()=>{j();$=class extends A{constructor(e){super(e,"TOKEN_STRING");}};});var P,Ve=u(()=>{ve();W();Ne();Ie();(d=>{function n(m,s,c,p,f,M,O){if((m>0||s<c.length-1)&&(!(Oe(p)&&Oe(f))||p&&p[0]!=="("||f&&f[0]!==")"))throw new _({reason:`Error in token \`${c.substring(m,s+1)}\`. Only spaces and delimiting characters are allowed just before or after the quotes.`,note:`${p?"Found `"+p+"` before the token":""}; ${f?"Found `"+f+"` after the token":""}`,source:M,position:Te(O,O.currIndex,1)-c.length+m,errorCode:D.InvalidQuotes,errorToken:c.substring(m,s+1)})}d.hasInvalidQuoteError_TK=n;function e(m,s,c,p,f,M){if(m===s)throw new _({reason:`\`${c}\` was found, but not closed.`,source:p,position:Te(f,f.currIndex,1)-M.length+m,errorCode:D.UnclosedQuote,errorToken:c})}d.hasUnclosedQuoteError_TK=e;function r(m,s,c){let p=m.match(/^\(+/),f=m.match(/\)+$/),M=p!==null?p[0].length:0,O=f!==null?f.index:m.length,Le=m.substring(M,O),Re=Le.search(/([()])/);if(Re!==-1){let Kn=Le[Re];throw new _({reason:`Found an invalid character '${Kn}'. Possibly because brackets cannot appear in-between characters.`,errorCode:D.InvalidBracket,source:s,position:Te(c,c.currIndex,1)-m.length+M+Re,errorToken:Le,fix:"Insert space in-between the bracket"})}}d.hasInvalidBracketError_TK=r;function a(m,s,c,p){if(m===void 0)throw new _({reason:"Found empty command '()'",source:s,errorToken:"()",position:Ce(c,c.currIndex,1)-p.value.length-2,errorCode:D.EmptyCommand,fix:"Delete the empty command"})}d.hasEmptyBracketError_ST=a;function i(m,s,c,p){if(m.isEmpty())throw new _({reason:"Invalid bracket, no opening bracket found",errorCode:D.InvalidBracket,source:s,position:Ce(c,c.currIndex,1)-p.value.length,errorToken:")"})}d.hasRougeRightBracketError_ST=i;function l(m,s,c){if(!m.isEmpty()){let p=m.pop();throw new _({reason:"Invalid bracket, no closing bracket found",position:Ce(s,p.tokenPos,1)-p.value.length,source:c,errorToken:p.value,errorCode:D.InvalidBracket})}}d.hasRougeLeftBracketError_ST=l;})(P||(P={}));});function ze(n){return n.map(e=>e instanceof F?e:We(e))}var en=u(()=>{ke();W();});function Fe(n){return n.split(/([()])/).filter(e=>e).map(e=>e===")"?new Y:e==="("?new U:new $(e))}function nn(n){let e=new X(n.split(" ")),r=[];if(n==="")throw new _({reason:"Empty string.",source:n,errorCode:D.FoundNullToken});for(;e.hasMoreTokens();){let a=e.nextToken()||"",i=a.indexOf('"'),l=i===-1?a.indexOf("'"):i;if(i!==-1||l!==-1){let d=i===-1?l:i,m=i===-1?"'":'"',s="",c=e.currIndex;for(;e.hasMoreTokens()&&a.indexOf(m,e.currIndex===c?d+1:0)===-1;)s=s.concat(a+" "),a=e.nextToken()||"";s=s.concat(a);let p=s.indexOf(m),f=s.lastIndexOf(m);P.hasUnclosedQuoteError_TK(p,f,m,n,e,s);let M=s.substring(0,p),O=s.substring(f+1);P.hasInvalidQuoteError_TK(p,f,s,M,O,n,e),p!=0&&r.push(...Fe(M)),r.push(new $(s.substring(p,f+1))),f!=s.length-1&&r.push(...Fe(O));}else P.hasInvalidBracketError_TK(a,n,e),r.push(...Fe(a));}return ze(r)}var rn=u(()=>{ve();Ne();Ie();qe();ke();Ve();en();});function Ue(n){let e=nn(n),r=new X(e),a=new z,i=new z;for(;r.hasMoreTokens();){let s=r.nextToken();if(s!==null)if(s instanceof U)a.push(s),i.push({value:s.value,tokenPos:r.currIndex});else if(s instanceof Y){let c=new x("",[]),p=new z;for(;!a.isEmpty()&&!(a.peek()instanceof U);)p.push(a.pop());P.hasRougeRightBracketError_ST(a,n,r,s),i.pop(),a.pop();let f=p.pop();for(P.hasEmptyBracketError_ST(f,n,r,s),f instanceof x?c=new x("eval",[f],!0):c.changeName(f.value);!p.isEmpty();)c.appendParam(p.pop());a.push(c);}else a.push(s);}P.hasRougeLeftBracketError_ST(i,r,n);let l=a.toArray(),d=l[0],m;d instanceof x?m=new x("eval",[d],!0):m=new x(l[0].value,[]);for(let s=1;s<l.length;s++)m.appendParam(l[s]);return m}var tn=u(()=>{Ye();ve();ke();oe();rn();Ve();});function an(n,e="  "){let r=" ";for(let a=0;a<n;a++)r+=e;return r}function on(n,e){let r="";function a(i,l=0,d="  "){let m=i.tokenID===e;if(i instanceof x){r+=an(l,d)+(l>0?"\u251C>":"\u2514> ")+i.value+(i.isInternal?" [internal]":"")+(m?" <-- Here":"")+`
`;for(let s of i.params)a(s,l+1,d);}else r+=an(l,d)+"\u251C "+i.value+(m?" <-- Here":"")+`
`;}return a(n),r.trim()}var sn=u(()=>{oe();});var b,Z=u(()=>{N();sn();b=class extends C{constructor(e,r){super(e),this.data=r;}prettify(){var e;return `${this.name}
Reason: ${this.message}

${(e=this.data)==null?void 0:e.state.originalStr}
${on(this.data.state.rootToken,this.data.occurredCmd.tokenID)}
`}};});function mn(n,e,r){let a;return r>e.getParamsLen-1?a=e.lastParam:a=e.types[r],a===t.any?{success:!0}:a===t.command&&!(n instanceof x)?{success:!1,foundType:a}:a===t.command&&n instanceof x?{success:!0,foundType:a,lazyEval:!0}:n instanceof q&&a!=t.number?{success:!0,foundType:a}:n instanceof V&&a!=t.boolean?{success:!0,foundType:a}:{success:!(n instanceof $&&a!=t.string),foundType:a}}var un=u(()=>{v();oe();Pe();$e();qe();});function dn(n,e,r,a,i){let l=n.map((d,m)=>{let s=mn(d,e,m);if(!s.success)throw new b(`The argument '${d.value}' doesn't match the required type
Required: ${s.foundType}
Found: ${d.type.substring(6).toLowerCase()}`,{state:r,occurredCmd:d});return d instanceof x?Qe(d,a,r,s.lazyEval):d.value});return i.exec(a.contextProvider,...l)}function Qe(n,e,r,a){let i=e.store.getCommand(n.commandName);if(e.contextProvider.currentCommand=n,e.contextProvider.currentState=r,!i)throw new b(`Command '${n.commandName}' not found.`,{state:r,occurredCmd:n});let l=n.params,d=i.params;if(!d.isVariable&&l.length!==d.num)throw new b(`The command '${n.commandName}' expects ${d.num} arguments, but found ${l.length}.`,{state:r,occurredCmd:n});if(d.isVariable&&d.num===-2&&l.length===0)throw new b(`The command '${n.commandName}' expects at least one argument. But none found.`,{state:r,occurredCmd:n});return a?()=>dn(l,d,r,e,i):dn(l,d,r,e,i)}var ln=u(()=>{oe();Z();un();});function Hn(n){return n.trim().replace(/\s+/g," ")}var se,cn=u(()=>{tn();ln();se=class{static run(e,r){e=Hn(e);let a=Ue(e);return Qe(a,r,{rootToken:a,originalStr:e})}};});var ie,pn=u(()=>{W();ie=class{constructor(){this.var_store=new Map;this.array_store=new Map;}setVariable(e,r,a){let i=a||Xe(r);this.var_store.set(e,{value:r,type:i});}setArray(e,r){this.array_store.set(e,{value:r});}getVariable(e){return this.var_store.get(e)}getArray(e){return this.array_store.get(e)}appendToArray(e,r){if(!this.array_store.has(e))return {success:!1,message:`Array ${e} does not exist.`};let a=this.array_store.get(e);return a.value.push(r),this.array_store.set(e,{value:a.value}),{success:!0}}deleteVariable(e){return this.var_store.delete(e)}deleteArray(e){return this.array_store.delete(e)}};});var me,hn=u(()=>{pn();me=class{constructor(){this.stdout=console;this.LOOP_LIMIT=200;this.isBreakCalled=!1;this.isContinueCalled=!1;this.isInLoop=!1;this.storeService=new ie;this.currCmd=null;this.currState=null;}get currentCommand(){return this.currCmd}set currentCommand(e){this.currCmd=e;}get currentState(){return this.currState}set currentState(e){this.currState=e;}};});var Q,Ke=u(()=>{Q=class{constructor(e,r,a,i,l,d){this.title=e,this.aliases=r,this.body=a,this.syntax=i,this.example=l||null,this.note=d||null;}};});var ue,gn=u(()=>{v();ae();ue=class{constructor(e,...r){this.types=[];this.isVariable=!1;if(r.length===0&&e===-2)throw new y("The command expects at least one parameter. But none found.");if(e>-1&&r.length>e)throw new y(`The command expects ${e} parameter(s), but found more than enough parameters (${r.length})`);this.types=r,this.num=e,e<=-1&&(this.isVariable=!0),this.lastParam=this.types[this.types.length-1]||t.any;}get getParamsLen(){return this.types.length}};});var de,bn=u(()=>{de=class{constructor(e,r,a,i,l){this.names=e,this.docs=r,this.params=a,this.returnType=i,this.exec=l;}};});var g,L=u(()=>{Ke();gn();ae();bn();g=class{constructor(){this._names=null;this._docs=null;this._args=null;this._returnType=null;this._exec=null;}names(...e){return this._names=e,this}directDocs(e,r,a,i,l,d){return this._docs=new Q(e,r||[],a,i,l,d),this}docs(e){return this._docs=e,this}args(e,...r){return this._args=new ue(e,...r),this}returnType(e){return this._returnType=e,this}run(e){return this._exec=e,this}build(){if(!this._names)throw new y("Command name(s) not specified.");if(!this._docs)throw new y("Command documentation not specified.");if(!this._args)throw new y("Command arguments not specified.");if(!this._exec)throw new y("Command execution function not specified.");if(!this._returnType)throw new y("Command return type not specified.");let e=new de(this._names,this._docs,this._args,this._returnType,this._exec);return this.reset(),e}reset(){this._names=null,this._docs=null,this._args=null,this._returnType=null,this._exec=null;}};});var o,R=u(()=>{ae();Ke();o=class{constructor(){this.title1=null;this.aliases1=[];this.body1=null;this.syntax1=null;this.example1=null;this.note1=null;}name(e){return this.title1=e,this}aliases(...e){return this.aliases1=e,this}description(e){return this.body1=e,this}syntax(e){return this.syntax1=e,this}example(e){return this.example1=e,this}note(e){return this.note1=e,this}build(){if(this.title1===null)throw new y("Title is a required field for documentation, it is not set");if(this.body1===null)throw new y("Body is a required field for documentation, it is not set");if(this.syntax1===null)throw new y("Syntax is a required field for documentation, it is not set");if(this.example1===null)throw new y("Example is a required field for documentation, it is not set");return new Q(this.title1,this.aliases1,this.body1,this.syntax1,this.example1,this.note1||void 0)}};});var fn,yn,ee,xn=u(()=>{fn="\u250C",yn="\u2500",ee="\u251C";});function wn(n){let e=n.docs,r=`
 `+e.title+` 
`;return r+=fn+yn.repeat(e.title.length+1)+`
`,e.aliases.length>0&&(r+=`${ee} Aliases: ${e.aliases.join(", ")}
`),r+=ee+" "+e.body+`
`,r+=ee+" Syntax: "+e.syntax+`
`,e.example&&(r+=ee+" Example: "+e.example+`
`),e.note&&(r+=ee+" Note: "+e.note+`
`),r}var Tn=u(()=>{xn();});var le,Se,Cn=u(()=>{E();L();v();R();Tn();le=h.getInstance(),Se=new g;le.addCommand(Se.names("test").directDocs("test",null,"A test command to check if AssistScript is working","test","test").args(0).returnType(t.string).run(()=>"AssistScript is working!").build());le.addCommand(Se.names("print","p","display","show","echo","log").docs(new o().name("print").aliases("p","display","show","echo","log").description("Prints the given message to the console.").syntax("print <message>").example('print "Hello, world!"').build()).args(-2,t.string).returnType(t.void).run((n,...e)=>{n.stdout.log(e.join(" "));}).build());le.addCommand(Se.names("help","h").docs(new o().name("help").aliases("h").description("Displays the help message for the given command.").syntax("help <command>").example("help print").build()).args(-1,t.string).returnType(t.void).run((n,e)=>{if(!e)return `Help commands helps you read the documentation of the given command.

Syntax: help <command>`;let r=le.getCommand(e);if(!r)return `Command '${e}' not found.`;n.stdout.log(wn(r));}).build());le.addCommand(Se.names("exec","execute","eval","evaluate").docs(new o().name("execute").aliases("eval","evaluate").description("Takes in any number of commands and executes them sequentially and returns the last executed command's return. Useful when you want to run multiple commands sequentially").syntax("eval <cmd1> <cmd2> ... <cmdN>").example("eval (set x 10) (set y 30) (print x = (get x)) (print y = (get y))").build()).args(-1,t.any).returnType(t.any).run((n,...e)=>e[e.length-1]).build());});var ce,pe,vn=u(()=>{E();L();v();R();ce=h.getInstance(),pe=new g;ce.addCommand(pe.names("and").args(2,t.boolean,t.boolean).docs(new o().name("and").description("Checks if both conditions are true.").syntax("and <boolean> <boolean>").example("and true false").build()).returnType(t.boolean).run((n,e,r)=>e&&r).build());ce.addCommand(pe.names("or").args(2,t.boolean,t.boolean).docs(new o().name("or").description("Checks if either condition is true.").syntax("or <boolean> <boolean>").example("or true false").build()).returnType(t.boolean).run((n,e,r)=>e||r).build());ce.addCommand(pe.names("not").args(1,t.boolean).docs(new o().name("not").description("Negates the condition.").syntax("not <boolean>").example("not true").build()).returnType(t.boolean).run((n,e)=>!e).build());ce.addCommand(pe.names("TRUE","true").args(0).docs(new o().name("true").description("Returns true.").syntax("true").example("true").build()).returnType(t.boolean).run(()=>!0).build());ce.addCommand(pe.names("FALSE").args(0).docs(new o().name("false").description("Returns false.").syntax("false").example("false").build()).returnType(t.boolean).run(()=>!1).build());});var ne,re,kn=u(()=>{E();L();v();R();ne=h.getInstance(),re=new g;ne.addCommand(re.names("lt","less-than").args(2,t.number,t.number).docs(new o().name("lt").aliases("less-than").description("Checks if the first number is less than the second.").syntax("lt <number> <number>").example("lt 2 3").build()).returnType(t.boolean).run((n,e,r)=>e<r).build());ne.addCommand(re.names("lte","less-than-equal").args(2,t.number,t.number).docs(new o().name("lte").aliases("less-than-equal").description("Checks if the first number is less than or equal to the second.").syntax("lte <number> <number>").example("lte 2 3").build()).returnType(t.boolean).run((n,e,r)=>e<=r).build());ne.addCommand(re.names("gt","greater-than").args(2,t.number,t.number).docs(new o().name("gt").aliases("greater-than").description("Checks if the first number is greater than the second.").syntax("gt <number> <number>").example("gt 2 3").build()).returnType(t.boolean).run((n,e,r)=>e>r).build());ne.addCommand(re.names("gte","greater-than-equal").args(2,t.number,t.number).docs(new o().name("gte").aliases("greater-than-equal").description("Checks if the first number is greater than or equal to the second.").syntax("gte <number> <number>").example("gte 2 3").build()).returnType(t.boolean).run((n,e,r)=>e>=r).build());ne.addCommand(re.names("equals","eq","is").args(2,t.any,t.any).docs(new o().name("equals").aliases("e","is").description("Checks if the two values are equal.").syntax("equals <value> <value>").example("equals 2 3").build()).returnType(t.boolean).run((n,e,r)=>e===r).build());ne.addCommand(re.names("ne","not-equals","not-is").args(2,t.any,t.any).docs(new o().name("ne").aliases("not-equals","not-is").description("Checks if the two values are not equal.").syntax("ne <value> <value>").example("ne 2 3").build()).returnType(t.boolean).run((n,e,r)=>e!==r).build());});var he,ge,In=u(()=>{E();L();v();R();he=h.getInstance(),ge=new g;he.addCommand(ge.names("add","sum","plus","addition").docs(new o().name("add").aliases("sum","plus","addition").description("Adds the given numbers together and returns the result.").syntax("add <number1> <number2> ...").example("add 1 2 3 4 5").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>e.reduce((r,a)=>r+a,0)).build());he.addCommand(ge.names("subtract","sub","minus","subtraction").docs(new o().name("sub").aliases("sub","minus","subtraction").description("Subtracts the given numbers and returns the result.").syntax("subtract <number1> <number2> ...").example("subtract 10 5 2").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>e.reduce((r,a)=>r-a)).build());he.addCommand(ge.names("multiply","mult","mul","product","multiplication").docs(new o().name("mult").aliases("multiply","mul","product","multiplication").description("Multiplies the given numbers and returns the result.").syntax("multiply <number1> <number2> ...").example("multiply 2 3 4").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>e.reduce((r,a)=>r*a,1)).build());he.addCommand(ge.names("divide","div","division").docs(new o().name("div").aliases("divide","division").description("Divides the given numbers and returns the result.").syntax("divide <number1> <number2> ...").example("divide 10 2 2").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>e.reduce((r,a)=>r/a)).build());he.addCommand(ge.names("modulo","mod","remainder").docs(new o().name("mod").aliases("modulo","remainder").description("Calculates the remainder of the division of the given numbers.").syntax("modulo <number1> <number2>").example("modulo 10 3").build()).returnType(t.number).args(2,t.number).run((n,e,r)=>e%r).build());});function Sn(n,e){return e===0?n:Sn(e,n%e)}function Ge(...n){let e=n[0];for(let r=1;r<n.length;r++)e=Sn(e,n[r]);return e}var Bn=u(()=>{});var w,T,An=u(()=>{E();L();R();v();Bn();Z();w=h.getInstance(),T=new g;w.addCommand(T.names("abs","absolute").docs(new o().name("abs").aliases("absolute").description("Returns the absolute value of the given number.").syntax("abs <number>").example("abs -5").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.abs(e)).build());w.addCommand(T.names("round").docs(new o().name("round").description("Rounds the given number to the nearest integer.").syntax("round <number>").example("round 3.14").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.round(e)).build());w.addCommand(T.names("ceil","ceiling").docs(new o().name("ceil").aliases("ceiling").description("Rounds the given number up to the nearest integer.").syntax("ceil <number>").example("ceil 3.14").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.ceil(e)).build());w.addCommand(T.names("floor").docs(new o().name("floor").description("Rounds the given number down to the nearest integer.").syntax("floor <number>").example("floor 3.14").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.floor(e)).build());w.addCommand(T.names("truncate","trunc").docs(new o().name("truncate").aliases("trunc").description("Truncates the given number to the nearest integer towards zero.").syntax("truncate <number>").example("truncate 3.14").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.trunc(e)).build());w.addCommand(T.names("min","minimum").docs(new o().name("min").aliases("minimum").description("Returns the smallest number from the given numbers.").syntax("min <number1> <number2> ...").example("min 2 5 1 9 3").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>Math.min(...e)).build());w.addCommand(T.names("max","maximum").docs(new o().name("max").aliases("maximum").description("Returns the largest number from the given numbers.").syntax("max <number1> <number2> ...").example("max 2 5 1 9 3").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>Math.max(...e)).build());w.addCommand(T.names("clamp").docs(new o().name("clamp").description("Clamps the given number within the given range.").syntax("clamp <number> <min> <max>").example("clamp 5 1 10").build()).returnType(t.number).args(3,t.number).run((n,e,r,a)=>Math.min(Math.max(e,r),a)).build());w.addCommand(T.names("sign").docs(new o().name("sign").description(`Returns the sign of the given number.
Returns 1 if positive else -1.
For positive 0 => +0
For negative 0 => -0`).syntax("sign <number>").example("sign -5").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.sign(e)).build());w.addCommand(T.names("pow","power").docs(new o().name("pow").aliases("power").description("Raises the first number to the power of the second number.").syntax("pow <number1> <number2>").example("pow 2 3").build()).returnType(t.number).args(2,t.number).run((n,e,r)=>Math.pow(e,r)).build());w.addCommand(T.names("sqrt","root").docs(new o().name("sqrt").aliases("root").description("Calculates the square root of the given number.").syntax("sqrt <number>").example("sqrt 9").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.sqrt(e)).build());w.addCommand(T.names("factorial","fact").docs(new o().name("factorial").aliases("fact").description("Calculates the factorial of the given number.").syntax("factorial <number>").example("factorial 5").build()).returnType(t.number).args(1,t.number).run((n,e)=>{let r=1;for(let a=1;a<=e;a++)r*=a;return r}).build());w.addCommand(T.names("gcd","hcf").docs(new o().name("gcd").aliases("hcf").description("Calculates the greatest basic divisor of the given numbers.").syntax("gcd <number1> <number2> ...").example("gcd 24 36").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>Ge(...e)).build());w.addCommand(T.names("lcm").docs(new o().name("lcm").description("Calculates the least basic multiple of the given numbers.").syntax("lcm <number1> <number2> ...").example("lcm 24 36").build()).returnType(t.number).args(-2,t.number).run((n,...e)=>{if(e.length<2)throw new b("At least 2 numbers are required for lcm",{state:n.currentState,occurredCmd:n.currentCommand});let r=e[0];for(let a=1;a<e.length;a++)r=r*e[a]/Ge(r,e[a]);return r}).build());w.addCommand(T.names("log2").docs(new o().name("log2").description("Calculates the base 2 logarithm of the given number.").syntax("log2 <number>").example("log2 8").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.log2(e)).build());w.addCommand(T.names("log10").docs(new o().name("log10").description("Calculates the base 10 logarithm of the given number.").syntax("log10 <number>").example("log10 100").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.log10(e)).build());w.addCommand(T.names("ln","loge").docs(new o().name("ln").aliases("loge").description("Calculates the natural logarithm of the given number.").syntax("ln <number>").example("ln 2.718").build()).returnType(t.number).args(1,t.number).run((n,e)=>Math.log(e)).build());});var k,I,En=u(()=>{E();L();v();R();k=h.getInstance(),I=new g;k.addCommand(I.names("sin","sine").docs(new o().name("sin").aliases("sine").description("Returns the sine of the given angle in radians.").syntax("sin <angle>").example("sin 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.sin(e)).build());k.addCommand(I.names("cos","cosine").docs(new o().name("cos").aliases("cosine").description("Returns the cosine of the given angle in radians.").syntax("cos <angle>").example("cos 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.cos(e)).build());k.addCommand(I.names("tan","tangent").docs(new o().name("tan").aliases("tangent").description("Returns the tangent of the given angle in radians.").syntax("tan <angle>").example("tan 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.tan(e)).build());k.addCommand(I.names("asin","arcsine").docs(new o().name("asin").aliases("arcsine").description("Returns the arcsine of the given angle in radians.").syntax("asin <angle>").example("asin 1").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.asin(e)).build());k.addCommand(I.names("acos","arccosine").docs(new o().name("acos").aliases("arccosine").description("Returns the arccosine of the given angle in radians.").syntax("acos <angle>").example("acos 1").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.acos(e)).build());k.addCommand(I.names("atan","arctangent").docs(new o().name("atan").aliases("arctangent").description("Returns the arctangent of the given angle in radians.").syntax("atan <angle>").example("atan 1").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.atan(e)).build());k.addCommand(I.names("atan2","arctangent2").docs(new o().name("atan2").aliases("arctangent2").description("Returns the arctangent of the quotient of its arguments.").syntax("atan2 <y> <x>").example("atan2 1 1").build()).args(2,t.number).returnType(t.number).run((n,e,r)=>Math.atan2(e,r)).build());k.addCommand(I.names("sinh","hsine").docs(new o().name("sinh").aliases("hsine").description("Returns the hyperbolic sine of the given angle in radians.").syntax("sinh <angle>").example("sinh 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.sinh(e)).build());k.addCommand(I.names("cosh","hcosine").docs(new o().name("cosh").aliases("hcosine").description("Returns the hyperbolic cosine of the given angle in radians.").syntax("cosh <angle>").example("cosh 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.cosh(e)).build());k.addCommand(I.names("tanh","htangent").docs(new o().name("tanh").aliases("htangent").description("Returns the hyperbolic tangent of the given angle in radians.").syntax("tanh <angle>").example("tanh 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.tanh(e)).build());k.addCommand(I.names("asinh","arcsineh").docs(new o().name("asinh").aliases("arcsineh").description("Returns the hyperbolic arcsine of the given angle in radians.").syntax("asinh <angle>").example("asinh 1").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.asinh(e)).build());k.addCommand(I.names("acosh","arccosineh").docs(new o().name("acosh").aliases("arccosineh").description("Returns the hyperbolic arccosine of the given angle in radians.").syntax("acosh <angle>").example("acosh 1").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.acosh(e)).build());k.addCommand(I.names("atanh","arctangenth").docs(new o().name("atanh").aliases("arctangenth").description("Returns the hyperbolic arctangent of the given angle in radians.").syntax("atanh <angle>").example("atanh 1").build()).args(1,t.number).returnType(t.number).run((n,e)=>Math.atanh(e)).build());k.addCommand(I.names("degToRad","d2r","deg2rad","deg").docs(new o().name("deg").aliases("d2r","deg2rad","degToRad").description("Converts the given angle in degrees to radians.").syntax("degToRad <angle>").example("degToRad 90").build()).args(1,t.number).returnType(t.number).run((n,e)=>e*Math.PI/180).build());k.addCommand(I.names("radToDeg","r2d","rad2deg","rad").docs(new o().name("rad").aliases("r2d","rad2deg","radToDeg").description("Converts the given angle in radians to degrees.").syntax("radToDeg <angle>").example("radToDeg 1.57").build()).args(1,t.number).returnType(t.number).run((n,e)=>e*180/Math.PI).build());});var Be,Ae,_n=u(()=>{E();L();v();R();Be=h.getInstance(),Ae=new g;Be.addCommand(Ae.names("random","rand","randf").docs(new o().name("random").aliases("rand","randf").description("Returns a random float between the specified ranges (optional). If no range is given then random float b/w 0 and 1, if one is specified number b/w 0 and that num.").syntax("random <min?> <max?>").example("random 5 10").build()).args(-1,t.number).returnType(t.number).run((n,e,r)=>e&&r?Math.random()*(r-e)+e:e?Math.random()*e:Math.random()).build());Be.addCommand(Ae.names("randomInt","randInt","randi").docs(new o().name("randomInt").aliases("randInt","randi").description("Returns a random integer between the specified ranges (optional). If no range is given then random integer b/w 0 and 1, if one is specified number b/w 0 and that num.").syntax("randomInt <min?> <max?>").example("randomInt 5 10").build()).args(-1,t.number).returnType(t.number).run((n,e,r)=>Math.floor(e&&r?Math.random()*(r-e+1)+e:e?Math.random()*e:Math.random())).build());Be.addCommand(Ae.names("randomBool","randBool","randb").docs(new o().name("randomBool").aliases("randBool","randb").description("Returns a random boolean value.").syntax("randomBool").example("randomBool").build()).args(0).returnType(t.boolean).run(()=>Math.random()<.5).build());Be.addCommand(Ae.names("randomChar","randChar","randc").docs(new o().name("randomChar").aliases("randChar","randc").description("Returns a random character from the ASCII table.").syntax("randomChar").example("randomChar").build()).args(0).returnType(t.string).run(()=>String.fromCharCode(Math.floor(Math.random()*256))).build());});var K,G,Ln=u(()=>{E();L();v();R();K=h.getInstance(),G=new g;K.addCommand(G.names("pi","PI").docs(new o().name("pi").aliases("PI").description("Returns the mathematical constant \u03C0.").syntax("pi").example("pi").build()).args(0).returnType(t.number).run(()=>Math.PI).build());K.addCommand(G.names("e","E").docs(new o().name("E").aliases("e").description("Returns the mathematical constant e.").syntax("e").example("e").build()).args(0).returnType(t.number).run(()=>Math.E).build());K.addCommand(G.names("sqrt2","root2").docs(new o().name("sqrt2").aliases("root2").description("Returns the square root of 2.").syntax("sqrt2").example("sqrt2").build()).args(0).returnType(t.number).run(()=>Math.SQRT2).build());K.addCommand(G.names("ln2").docs(new o().name("ln2").description("Returns the natural logarithm of 2.").syntax("ln2").example("ln2").build()).args(0).returnType(t.number).run(()=>Math.LN2).build());K.addCommand(G.names("ln10").docs(new o().name("ln10").description("Returns the natural logarithm of 10.").syntax("ln10").example("ln10").build()).args(0).returnType(t.number).run(()=>Math.LN10).build());K.addCommand(G.names("log2e").docs(new o().name("log2e").description("Returns the base 2 logarithm of e.").syntax("log2e").example("log2e").build()).args(0).returnType(t.number).run(()=>Math.LOG2E).build());K.addCommand(G.names("log10e").docs(new o().name("log10e").description("Returns the base 10 logarithm of e.").syntax("log10e").example("log10e").build()).args(0).returnType(t.number).run(()=>Math.LOG10E).build());});var te,Rn=u(()=>{N();te=class extends C{prettify(){return `Gracefully exited: ${this.message}`}};});var H,Dn=u(()=>{N();H=class extends C{constructor(e){super(e),this.name="ASInterrupt";}};});function Ee(n){try{n();}catch(e){if(!(e instanceof H))throw e}}var be,fe,Mn=u(()=>{E();L();v();R();Rn();Z();Dn();be=h.getInstance(),fe=new g;be.addCommand(fe.names("break").args(0).docs(new o().name("break").description("Breaks out of the loop in which it is called.").syntax("break").note("Internally it throws an `ASInterrupt` error to interrupt the execution, but is gracefully handled. When implementing your own commands, you should always handle this error").example(`
(set i 0)
(while (lt (get i) 10) (
    (if (eq (get i) 5) (
        (print i is 5)
        (continue)
    ))
    
    (print (get i))    
    (incr i)    
))`).build()).returnType(t.void).run(n=>{throw n.isInLoop?(n.isBreakCalled=!0,new H("Continue called")):new b("`break` can only be used inside a loop.",{state:n.currentState,occurredCmd:n.currentCommand})}).build());be.addCommand(fe.names("continue").args(0).docs(new o().name("continue").description("Skips the rest of the loop body and does the next iteration in which it is called.").note("Internally it throws an `ASInterrupt` error to interrupt the execution, but is gracefully handled. When implementing your own commands, you should always handle this error").syntax("continue").example(`
(set i 0)
(while (lt (get i) 10) (
    (if (eq (get i) 5) (
        (print i is 5)
        (break)
    ))
    
    (print (get i))    
    (incr i)    
))`).build()).returnType(t.void).run(n=>{throw n.isInLoop?(n.isContinueCalled=!0,new H("Continue called")):new b("`continue` can only be used inside a loop.",{state:n.currentState,occurredCmd:n.currentCommand})}).build());be.addCommand(fe.names("while").args(2,t.command).docs(new o().name("while").description("Loops while the condition is true.").syntax("while <condition> <command>").example("while (TRUE) (p (get i))").build()).returnType(t.void).run((n,e,r)=>{let a=0;for(n.isInLoop=!0;e();){if(n.isBreakCalled){n.isBreakCalled=!1;break}if(a++>=n.LOOP_LIMIT)throw n.isInLoop=!1,new te(`Loop limit of ${n.LOOP_LIMIT} exceeded.`);n.isContinueCalled?n.isContinueCalled=!1:Ee(r);}n.isInLoop=!1;}).build());be.addCommand(fe.names("repeat").args(2,t.number,t.command).docs(new o().name("repeat").description("Repeats the given command n times.").syntax("repeat <number> <command>").example("repeat 5 (print Hello, world!)").build()).returnType(t.void).run((n,e,r)=>{if(e>n.LOOP_LIMIT||e<0)throw new b(`Repetition cannot exceed ${n.LOOP_LIMIT} or be negative.`,{state:n.currentState,occurredCmd:n.currentCommand});n.isInLoop=!0;for(let a=0;a<e;a++){if(n.isBreakCalled){n.isBreakCalled=!1;break}n.isContinueCalled?n.isContinueCalled=!1:Ee(r);}n.isInLoop=!1;}).build());be.addCommand(fe.names("for").args(4,t.command,t.command,t.command,t.command).docs(new o().name("for").description("Loops through the given range. <init> is executed once at the beginning, <condition> is checked before each iteration, <increment> is executed at each iteration.").syntax("for <init> <condition> <increment> <command>").example("for (set i 0) (lt (get i) 10) (incr i) (print i = (get i))").build()).returnType(t.void).run((n,e,r,a,i)=>{e(),n.isInLoop=!0;let l=0;for(;r();){if(n.isBreakCalled){n.isBreakCalled=!1;break}if(l++>=n.LOOP_LIMIT)throw n.isInLoop=!1,new te(`Loop limit of ${n.LOOP_LIMIT} exceeded.`);n.isContinueCalled?n.isContinueCalled=!1:(Ee(i),n.isBreakCalled||Ee(a));}n.isInLoop=!1;}).build());});var Pn,$n,On=u(()=>{E();L();v();R();Z();Pn=h.getInstance(),$n=new g;Pn.addCommand($n.names("if").args(2,t.command,t.command).docs(new o().name("if").description("Executes a command if the condition is true.").syntax("if <condition> <command>").example("if (lt 10 20) (print 10 < 20)").build()).returnType(t.void).run((n,e,r)=>{e()&&r();}).build());Pn.addCommand($n.names("if-else","ife").args(4,t.command,t.command,t.string,t.command).docs(new o().name("if").description("Executes a command if the condition is true, otherwise executes another command.").syntax("if <condition> <command> else <command>").example("if (lt 10 20) (print 10 < 20) else (print 10 >= 20)").build()).returnType(t.void).run((n,e,r,a,i)=>{if(a!=="else")throw new b(`Expected 'else' but got '${a}'`,{state:n.currentState,occurredCmd:n.currentCommand});e()?r():i();}).build());});function Nn(n,e){var r;if(!we(n))throw new b(`Invalid variable name: ${n}. The variable name should only contain letters, numbers, underscores and hyphens. And should not start with a number.`,{state:e.currentState,occurredCmd:(r=e.currentCommand)==null?void 0:r.params[0]})}function qn(n,e){let r=n.storeService.getVariable(e);if(!r)throw new b(`Variable '${e}' not found.`,{state:n.currentState,occurredCmd:n.currentCommand});if(r.type!==t.number)throw new b(`Variable '${e}' is not a number.`,{state:n.currentState,occurredCmd:n.currentCommand});return r}function J(n,e,r,a){var i,l;if(!n)throw new b(`Array '${e}' does not exist.`,{state:r.currentState,occurredCmd:(i=r.currentCommand)==null?void 0:i.params[0]});if(a&&(a<0||a>=n.value.length))throw new b(`Index ${a} out of bounds for array '${e}' of length ${e.length}.`,{state:r.currentState,occurredCmd:(l=r.currentCommand)==null?void 0:l.params[1]})}var S,B,Vn=u(()=>{E();L();v();R();W();Z();S=h.getInstance(),B=new g;S.addCommand(B.names("set","set-variable","var").docs(new o().name("set").aliases("set-variable","var").description("Used to create a new variable, if the variable name already exits it updates the existing one.").syntax("set <variable-name> <value>").example("set x 5").build()).returnType(t.any).args(2,t.string,t.any).run((n,e,r)=>(Nn(e,n),n.storeService.setVariable(e,r),r)).build());S.addCommand(B.names("get","get-variable").docs(new o().name("get").aliases("get-variable").description("Returns the value of a variable.").syntax("get <variable-name>").example("get x").build()).returnType(t.any).args(1,t.string).run((n,e)=>{var a;let r=n.storeService.getVariable(e);if(r)return r.value;throw new b(`Variable ${e} does not exist.`,{state:n.currentState,occurredCmd:(a=n.currentCommand)==null?void 0:a.params[0]})}).build());S.addCommand(B.names("delete","delete-variable").docs(new o().name("delete").aliases("delete-variable").description("Deletes a variable. Returns true if the variable existed and is deleted, false otherwise.").syntax("delete <variable-name>").example("delete x").build()).returnType(t.boolean).args(1,t.string).run((n,e)=>n.storeService.deleteVariable(e)).build());S.addCommand(B.names("incr","increment").docs(new o().name("incr").aliases("increment").description("Increments the given variable by 1.").syntax("incr <varname>").example("incr i").build()).args(1,t.string).returnType(t.number).run((n,e)=>{let r=qn(n,e);return n.storeService.setVariable(e,r.value+1),r.value+1}).build());S.addCommand(B.names("decr","decrement").docs(new o().name("decr").aliases("decrement").description("Decrements the given variable by 1.").syntax("decr <varname>").example("decr i").build()).args(1,t.string).returnType(t.number).run((n,e)=>{let r=qn(n,e);return n.storeService.setVariable(e,r.value-1),r.value-1}).build());S.addCommand(B.names("array","arr").docs(new o().name("array").aliases("arr").description("Creates a new array and stores it. If the array name already exists, it overwrites the existing one.").syntax("array <array-name> <value1> <value2> ...").example("array arr 1 2 3 4").build()).returnType(t.array).args(-2,t.string,t.any).run((n,e,...r)=>(Nn(e,n),n.storeService.setArray(e,r),r)).build());S.addCommand(B.names("get-arr","getarr","array-get").docs(new o().name("get-arr").aliases("getarr","array-get").description("Returns the array stored in the variable.").syntax("get-arr <array-name>").example("get-arr arr").build()).returnType(t.array).args(1,t.string).run((n,e)=>{let r=n.storeService.getArray(e);if(r)return r.value;J(r,e,n);}).build());S.addCommand(B.names("index").docs(new o().name("index").description("Returns the value at the given index of the array.").syntax("index <array-name> <index>").example("index arr 2").build()).returnType(t.any).args(2,t.string,t.number).run((n,e,r)=>{let a=n.storeService.getArray(e);return J(a,e,n,r),a.value[r]}).build());S.addCommand(B.names("setarr","setat","set-arr","set-at").docs(new o().name("setarr").aliases("setat","set-arr","set-at").description("Sets the value at the given index of the array.").syntax("setarr <array-name> <index> <value>").example("setarr arr 2 10").build()).returnType(t.any).args(3,t.string,t.number,t.any).run((n,e,r,a)=>{let i=n.storeService.getArray(e);return J(i,e,n,r),i.value[r]=a,n.storeService.setArray(e,i.value),a}).build());S.addCommand(B.names("length","len","arr-length").docs(new o().name("length").aliases("len","arr-length").description("Returns the length of the array.").syntax("length <array-name>").example("length arr").build()).returnType(t.number).args(1,t.string).run((n,e)=>{let r=n.storeService.getArray(e);return J(r,e,n),r.value.length}).build());S.addCommand(B.names("delete-arr","deletearr","del-arr","delarr").docs(new o().name("delete-arr").aliases("deletearr","del-arr","delarr").description("Deletes the array.").syntax("delete-arr <array-name>").example("delete-arr arr").build()).returnType(t.boolean).args(1,t.string).run((n,e)=>n.storeService.deleteArray(e)).build());S.addCommand(B.names("append","append-arr","appendarr").docs(new o().name("append").aliases("append-arr","appendarr").description("Appends the value to the end of the array.").syntax("append <array-name> <value>").example("append arr 10").build()).returnType(t.any).args(2,t.string,t.any).run((n,e,r)=>{let a=n.storeService.getArray(e);return J(a,e,n),a.value.push(r),n.storeService.setArray(e,a.value),r}).build());S.addCommand(B.names("pop","pop-arr","poparr").docs(new o().name("pop").aliases("pop-arr","poparr").description("Removes and returns the last element of the array.").syntax("pop <array-name>").example("pop arr").build()).returnType(t.any).args(1,t.string).run((n,e)=>{let r=n.storeService.getArray(e);J(r,e,n);let a=r.value.pop();return n.storeService.setArray(e,r.value),a}).build());S.addCommand(B.names("insert","insert-arr","insertarr").docs(new o().name("insert").aliases("insert-arr","insertarr").description("Inserts the value at the given index of the array.").syntax("insert <array-name> <index> <value>").example("insert arr 2 10").build()).returnType(t.any).args(3,t.string,t.number,t.any).run((n,e,r,a)=>{let i=n.storeService.getArray(e);return J(i,e,n,r),i.value.splice(r,0,a),n.storeService.setArray(e,i.value),a}).build());});var zn=u(()=>{Cn();vn();kn();In();An();En();_n();Ln();Mn();On();Vn();});var ye,Fn=u(()=>{E();cn();hn();zn();ye=class{constructor(e){this.store=h.getInstance();this.contextProvider=e||new me;}execute(e){return se.run(e,this)}};});var er=Gn(Qn=>{Fn();N();var _e=new commander.Command;_e.name("aslangc").description("The ASLang(AssistScript) runner").version("1.0").option("-r, --repl","Run the REPL mode").argument("[file]","The AssistScript file to run").action((n,e)=>De(Qn,null,function*(){n&&e.repl?(console.error("Error: Cannot provide both a file and use the -r option simultaneously."),_e.help()):n?yield Yn(n):e.repl?Zn():_e.help();}));var Xn=new ye;function Un(n){try{let e=Xn.execute(n);e!==void 0&&console.log(e);}catch(e){e instanceof C?console.error(e.prettify()):console.error(e);}}function Yn(n){return De(this,null,function*(){try{let r=(yield jn__default.default.promises.readFile(n)).toString();Un(r);}catch(e){console.error(`Error reading file '${n}'
> ${e.message}`);}})}function Zn(){let n=Wn__default.default.createInterface({input:process.stdin,output:process.stdout,prompt:"> "});console.log("REPL MODE: "),n.prompt(),n.on("line",e=>{let r=e.trim();if(r==="exit"){n.close();return}if(r==="clear"){console.clear(),n.prompt();return}Un(e),n.prompt();}).on("close",()=>{console.log("REPL MODE END"),process.exit(0);});}_e.parse(process.argv);});var cli = er();

module.exports = cli;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=cli.js.map